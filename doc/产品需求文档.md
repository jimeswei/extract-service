# 智能文本提取服务 - 产品需求文档(PRD)

## 1. 产品概述

### 1.1 产品定位
一个轻量级、高效的文本智能提取服务，专注于将非结构化文本转换为结构化知识三元组。

### 1.2 核心价值
- **简单易用**: 一个API调用即可完成文本到知识图谱的转换
- **即插即用**: 无需复杂配置，开箱即用
- **成本可控**: 基于实际使用量的灵活定价模型

## 2. 用户画像与场景

### 2.1 目标用户
```
主要用户: 企业开发者、数据分析师
次要用户: 研究人员、内容运营人员
```

### 2.2 核心使用场景
1. **文档知识提取**: 将企业文档转换为可查询的知识图谱
2. **内容智能分析**: 从新闻、报告中快速提取关键信息
3. **数据预处理**: 为AI训练准备结构化数据

## 3. MVP功能规划

### 3.1 核心功能(Must Have)

#### 3.1.1 文本提取API
```http
POST /api/v1/extract
Content-Type: application/json

{
  "text": "用户输入的文本内容",
  "extractType": "triples" // 默认值
}

Response:
{
  "success": true,
  "data": {
    "triples": [
      {
        "subject": "主体",
        "predicate": "关系", 
        "object": "客体",
        "confidence": 0.95
      }
    ],
    "processTime": 1500,
    "tokenCount": 256
  }
}
```

#### 3.1.2 健康检查
```http
GET /health
Response: {"status": "UP", "timestamp": "2024-01-01T10:00:00Z"}
```

#### 3.1.3 基础监控
- API调用次数统计
- 响应时间监控
- 错误率追踪

### 3.2 重要功能(Should Have)

#### 3.2.1 批量处理
```http
POST /api/v1/extract/batch
{
  "texts": ["文本1", "文本2", "文本3"],
  "extractType": "triples"
}
```

#### 3.2.2 结果缓存
- 相同文本内容24小时内返回缓存结果
- 提升响应速度，降低AI调用成本

### 3.3 期望功能(Could Have)

#### 3.3.1 流式处理
```http
POST /api/v1/extract/stream
Content-Type: text/event-stream
```

#### 3.3.2 多格式支持
- JSON格式输出(默认)
- CSV格式导出
- GraphML格式导出

## 4. 技术架构(最小可行)

### 4.1 技术栈选择
```yaml
核心框架: Spring Boot 3.2 (单体应用)
AI集成: Deepseek API
数据存储: H2数据库(开发) + MySQL(生产)
缓存: 内存缓存(Caffeine)
部署: Docker容器化
```

### 4.2 系统架构图
```
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   Web Client    │───▶│  Extract Service │───▶│   Deepseek API  │
└─────────────────┘    └──────────────────┘    └─────────────────┘
                                │
                                ▼
                       ┌──────────────────┐
                       │   Local Cache    │
                       └──────────────────┘
```

## 5. 实施路线图

### 5.1 Sprint 1 (2周) - MVP基础版
- [ ] 项目脚手架搭建
- [ ] 基础API开发(/extract, /health)
- [ ] Deepseek API集成
- [ ] 基础错误处理
- [ ] Docker打包

### 5.2 Sprint 2 (1周) - 优化增强
- [ ] 结果缓存实现
- [ ] 批量处理API
- [ ] 基础监控指标
- [ ] API文档完善

### 5.3 Sprint 3 (1周) - 生产就绪
- [ ] 生产环境配置
- [ ] 性能优化
- [ ] 错误监控
- [ ] 部署脚本

## 6. 成功指标

### 6.1 技术指标
- API响应时间 < 3秒(95分位)
- 服务可用性 > 99%
- 提取准确率 > 90%

### 6.2 业务指标
- 日活跃API调用 > 1000次
- 用户满意度 > 4.0/5.0
- 成本控制在预算范围内

## 7. 风险控制

### 7.1 技术风险
- **AI API限流**: 实现请求队列和重试机制
- **服务过载**: 设置合理的并发限制
- **数据安全**: 不存储用户敏感数据

### 7.2 业务风险
- **成本超标**: 设置每日API调用上限
- **滥用风险**: 实现基础的频率限制
- **合规风险**: 明确数据处理政策

## 8. 上线标准

### 8.1 功能完整性
- [ ] 核心API功能正常
- [ ] 错误处理完善
- [ ] 文档齐全

### 8.2 非功能性要求
- [ ] 性能达标
- [ ] 监控完善
- [ ] 安全检查通过

### 8.3 运维就绪
- [ ] 部署脚本完成
- [ ] 告警配置完成
- [ ] 运维文档完善

## 9. 后续演进方向

### 9.1 短期(3个月)
- 支持更多文本格式(PDF、Word)
- 增加实体识别准确度
- 提供可视化界面

### 9.2 中期(6个月)
- 多语言支持
- 自定义提取模板
- 企业级权限管理

### 9.3 长期(12个月)
- 知识图谱查询接口
- 智能推荐功能
- 开放API生态

---

**产品原则**: 先做对，再做好，最后做大
**开发理念**: 最小可行产品(MVP) → 快速迭代 → 用户反馈驱动
**成功关键**: 专注核心价值，避免功能膨胀，保持产品简洁性 